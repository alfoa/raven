<?xml version="1.0" ?>
<Simulation>
  <TestInfo>
    <author>rouxpn</author>
    <created>2018-04-23</created>
    <description>
       An example of using the PHISICS code interface. 
    </description>
    <revisions>
      <revision author="rouxpn" date="2017-11-06">phisics test case</revision>
    </revisions>
  </TestInfo>
  <RunInfo>
    <WorkingDir>./phisics</WorkingDir>
    <Sequence>phisicsTest2D</Sequence>
    <!--
    <clusterParameters>-P art</clusterParameters>  
    <RemoteRunCommand>raven_qsub_intel_scale.sh</RemoteRunCommand> 
    <NodeParameter>-machinefile</NodeParameter> 
    <MPIExec>mpirun</MPIExec>
    <mode>mpi 
        <runQSUB/> 
    </mode>    
    <batchSize>1</batchSize>
    <NumMPI>2</NumMPI>
    -->
  </RunInfo>

  <Files>
    <Input name="decay.dat"           type="decay"             perturbable="True"   subDirectory="library_fiss" >decay.dat</Input>
    <Input name="inp.xml"             type="inp"               perturbable="False"                              >inp.xml</Input>
    <Input name="lib_inp_path.xml"    type="path"              perturbable="False"                              >lib_inp_path.xml</Input>
    <Input name="Material.xml"        type="Material"          perturbable="True"                               >Material.xml</Input>
    <Input name="Depletion_input.xml" type="Depletion_input"   perturbable="False"                              >Depletion_input.xml</Input>
    <Input name="Xs-Library.xml"      type="Xs-Library"        perturbable="False"                              >Xs-Library.xml</Input>
    <Input name="FissionYield.dat"    type="FissionYield"      perturbable="True"  subDirectory="library_fiss"  >FissionYield.dat</Input>
    <Input name="FissQValue.dat"      type="FissQValue"        perturbable="True"  subDirectory="library_fiss"  >FissQValue.dat</Input>
    <Input name="AlphaDecay.path"     type="AlphaDecay"        perturbable="True"  subDirectory="path"          >AlphaDecay.path</Input>
    <Input name="Beta+Decay.path"     type="Beta+Decay"        perturbable="True"  subDirectory="path"          >Beta+Decay.path</Input>
    <Input name="Beta+xDecay.path"    type="Beta+xDecay"       perturbable="True"  subDirectory="path"          >Beta+xDecay.path</Input>
    <Input name="BetaDecay.path"      type="BetaDecay"         perturbable="True"  subDirectory="path"          >BetaDecay.path</Input>
    <Input name="BetaxDecay.path"     type="BetaxDecay"        perturbable="True"  subDirectory="path"          >BetaxDecay.path</Input>
    <Input name="IntTraDecay.path"    type="IntTraDecay"       perturbable="True"  subDirectory="path"          >IntTraDecay.path</Input>
    <Input name="ft30f001"            type="isoXS"             perturbable="False"                              >ft30f001</Input>
    <Input name="scaled_xs.xml"       type="XS"                perturbable="True"                               >scaled_xs.xml</Input>
    <Input name="N,2N.path"           type="N,2N"              perturbable="False" subDirectory="path"          >N,2N.path</Input>
    <Input name="N,ALPHA.path"        type="N,ALPHA"           perturbable="False" subDirectory="path"          >N,ALPHA.path</Input>
    <Input name="N,G.path"            type="N,G"               perturbable="False" subDirectory="path"          >N,G.path</Input>
    <Input name="N,Gx.path"           type="N,Gx"              perturbable="False" subDirectory="path"          >N,Gx.path</Input>
    <Input name="N,P.path"            type="N,P"               perturbable="False" subDirectory="path"          >N,P.path</Input>  
    <Input name="budep.inp"           type="budep"             perturbable="False" subDirectory="library_fiss"  >budep.inp</Input>
    <Input name="CRAM_coeff_PF.dat"   type="CRAM_coeff_PF"     perturbable="False" subDirectory="library_fiss"  >CRAM_coeff_PF.dat</Input>
    <Input name="IsotopeList.dat"     type="IsotopeList"       perturbable="False" subDirectory="input_dpl"     >IsotopeList.dat</Input>
    <Input name="mass.inp"            type="mass"              perturbable="False" subDirectory="input_dpl"     >mass.inp</Input>
    <Input name="tabMapping.xml"      type="tabMap"            perturbable="False"                              >tabMapping.xml</Input>
  </Files>

  <Models>
    <Code name="PHISICS" subType="Phisics">
       <executable>/home/rouxpn/PHISICS/PHISICS_8/projects/bin/dpl_instant_run</executable>   
       <mrtauStandAlone>F</mrtauStandAlone>
       <printSpatialRR>F</printSpatialRR>
       <printSpatialFlux>F</printSpatialFlux>
        <mrtauStandAloneExecutable>/home/rouxpn/PHISICS/PHISICS_8/projects/bin/mrtau_standalone</mrtauStandAloneExecutable>
    </Code>
  </Models>

  <Distributions>
    <Normal name="DECAY|BETA|ZN68_distrib">
      <mean>44.5</mean>
      <sigma>0.5</sigma>
      <upperBound>40</upperBound>
      <lowerBound>49</lowerBound>
    </Normal>
    <Normal name="FY|FAST|U235|ZN67_distrib">
      <mean>5.7775</mean>
      <sigma>0.5</sigma>
      <upperBound>6.0</upperBound>
      <lowerBound>5.0</lowerBound>
    </Normal>
    <Normal name="FY|THERMAL|U235|I135_distrib">
      <mean>5.7775</mean>
      <sigma>0.5</sigma>
    </Normal>
    <Normal name="DENSITY|MATF3|U-235_distrib">
      <mean>5.0E-07</mean>
      <sigma>1.0E-07</sigma>
    </Normal>
    <Normal name="QVALUES|PU241_distrib">
      <mean>0.02</mean>
      <sigma>0.001</sigma>
      <upperBound>0.015</upperBound>
      <lowerBound>0.025</lowerBound>
    </Normal>
    <Normal name="ALPHADECAY|U234_distrib">
      <mean>0.02</mean>
      <sigma>0.001</sigma>
      <upperBound>0.015</upperBound>
      <lowerBound>0.025</lowerBound>
    </Normal>
    <Normal name="BETA+DECAY|NB93_distrib">
      <mean>0.02</mean>
      <sigma>0.001</sigma>
      <upperBound>0.015</upperBound>
      <lowerBound>0.025</lowerBound>
    </Normal>
    <Normal name="BETA+XDECAY|U234_distrib">
      <mean>0.02</mean>
      <sigma>0.001</sigma>
      <upperBound>0.015</upperBound>
      <lowerBound>0.025</lowerBound>
    </Normal>
    <Normal name="BETADECAY|MO95_distrib">
      <mean>0.02</mean>
      <sigma>0.001</sigma>
      <upperBound>0.015</upperBound>
      <lowerBound>0.025</lowerBound>
    </Normal>
    <Normal name="BETAXDECAY|U234_distrib">
      <mean>0.02</mean>
      <sigma>0.001</sigma>
      <upperBound>0.015</upperBound>
      <lowerBound>0.025</lowerBound>
    </Normal>
    <Normal name="INTTRADECAY|U234_distrib">
      <mean>0.02</mean>
      <sigma>0.001</sigma>
      <upperBound>0.015</upperBound>
      <lowerBound>0.025</lowerBound>
    </Normal>
    <Normal name="XS|1|FUEL1|U235|MULTIPLIER|FISSIONXS|1_distrib">
      <mean>0.02</mean>
      <sigma>0.001</sigma>
      <upperBound>0.015</upperBound>
      <lowerBound>0.025</lowerBound>
    </Normal>
  </Distributions>

  <Samplers>
    <MonteCarlo name="MC_samp">
      <samplerInit>
        <limit>2</limit>
      </samplerInit>
      <variable name="DECAY|BETA|ZN68">
        <distribution>DECAY|BETA|ZN68_distrib</distribution>
      </variable>
      <variable name="FY|FAST|U235|ZN67">
        <distribution>FY|FAST|U235|ZN67_distrib</distribution>
      </variable>
      <variable name="FY|THERMAL|U235|I135">
        <distribution>FY|THERMAL|U235|I135_distrib</distribution>
      </variable>
      <variable name="DENSITY|MATF3|U-235">
        <distribution>DENSITY|MATF3|U-235_distrib</distribution>
      </variable>
      <variable name="QVALUES|PU241">
        <distribution>QVALUES|PU241_distrib</distribution>
      </variable>
      <variable name="ALPHADECAY|U234">
        <distribution>ALPHADECAY|U234_distrib</distribution>
      </variable>
      <variable name="BETA+DECAY|NB93">
        <distribution>BETA+DECAY|NB93_distrib</distribution>
      </variable>
      <variable name="BETA+XDECAY|U234">
        <distribution>BETA+XDECAY|U234_distrib</distribution>
      </variable>
      <variable name="BETADECAY|MO95">
        <distribution>BETADECAY|MO95_distrib</distribution>
      </variable>
      <variable name="BETAXDECAY|U234">
        <distribution>BETAXDECAY|U234_distrib</distribution>
      </variable>
      <variable name="INTTRADECAY|U234">
        <distribution>INTTRADECAY|U234_distrib</distribution>
      </variable>
      <variable name="XS|1|FUEL1|U235|MULTIPLIER|FISSIONXS|1">
        <distribution>XS|1|FUEL1|U235|MULTIPLIER|FISSIONXS|1_distrib</distribution>
      </variable>
    </MonteCarlo>
  </Samplers>

  <Steps>
    <MultiRun name="phisicsTest2D">
      <Input class="Files" type="decay"             >decay.dat</Input>
      <Input class="Files" type="inp"               >inp.xml</Input>
      <Input class="Files" type="path"              >lib_inp_path.xml</Input>
      <Input class="Files" type="Material"          >Material.xml</Input>
      <Input class="Files" type="Depletion_input"   >Depletion_input.xml</Input>
      <Input class="Files" type="Xs-Library"        >Xs-Library.xml</Input>
      <Input class="Files" type="FissionYield"      >FissionYield.dat</Input>
      <Input class="Files" type="FissQValue"        >FissQValue.dat</Input>
      <Input class="Files" type="AlphaDecay"        >AlphaDecay.path</Input>
      <Input class="Files" type="Beta+Decay"        >Beta+Decay.path</Input>
      <Input class="Files" type="Beta+xDecay"       >Beta+xDecay.path</Input>
      <Input class="Files" type="BetaDecay"         >BetaDecay.path</Input>
      <Input class="Files" type="BetaxDecay"        >BetaxDecay.path</Input>
      <Input class="Files" type="IntTraDecay"       >IntTraDecay.path</Input>
      <Input class="Files" type="ft30f001"          >ft30f001</Input>
      <Input class="Files" type="XS"                >scaled_xs.xml</Input>   
      <Input class="Files" type="N,2N"              >N,2N.path</Input>  
      <Input class="Files" type="N,ALPHA"           >N,ALPHA.path</Input>
      <Input class="Files" type="N,G"               >N,G.path</Input>
      <Input class="Files" type="N,Gx"              >N,Gx.path</Input>
      <Input class="Files" type="N,P"               >N,P.path</Input> 
      <Input class="Files" type="budep"             >budep.inp</Input>   
      <Input class="Files" type="CRAM_coeff_PF"     >CRAM_coeff_PF.dat</Input> 
      <Input class="Files" type="IsotopeList"       >IsotopeList.dat</Input> 
      <Input class="Files" type="mass"              >mass.inp</Input> 
      <Input class="Files" type="tabMap"            >tabMapping.xml</Input> 
          
      <Model class="Models" type="Code">PHISICS</Model>
      <Sampler class="Samplers" type="MonteCarlo">MC_samp</Sampler>
      <Output class="DataObjects" type="PointSet">outMC</Output>
      <Output class="OutStreams" type="Print">out_streams_RAVEN</Output>
    </MultiRun>
  </Steps>
  
  <OutStreams>
    <Print name="out_streams_RAVEN">
      <type>csv</type>
      <source>outMC</source>
    </Print>
  </OutStreams>

  <DataObjects>
    <PointSet name="outMC">
      <Input>DECAY|BETA|ZN68,FY|FAST|U235|ZN67</Input>
      <Output>keff</Output>
      </PointSet>
    </DataObjects>
</Simulation>
